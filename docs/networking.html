<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Networking - Self-Hosted Applications</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        .content-section {
            padding: 8rem 5% 4rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        .content-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .content-header h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .content-header p {
            color: var(--text-muted);
            font-size: 1.2rem;
        }

        .tutorial-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255,255,255,0.05);
            transition: all 0.3s ease;
        }

        .tutorial-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0,0,0,0.2);
            border-color: var(--primary-color);
        }

        .tutorial-card h2 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.8rem;
        }

        .tutorial-card h3 {
            color: var(--accent-color);
            margin: 1.5rem 0 0.5rem;
            font-size: 1.3rem;
        }

        .code-block {
            background: #0d1117;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1rem 0;
            position: relative;
            overflow-x: auto;
        }

        .code-block code {
            font-family: 'Courier New', monospace;
            font-size: 0.95rem;
            color: #c9d1d9;
            white-space: pre;
        }

        .code-block .comment {
            color: #8b949e;
        }

        .code-block .keyword {
            color: #ff7b72;
        }

        .code-block .string {
            color: #a5d6ff;
        }

        .code-block .command {
            color: #7ee787;
        }

        .code-block .flag {
            color: #ffa657;
        }

        .tip-box {
            background: rgba(36, 150, 237, 0.1);
            border-left: 4px solid var(--primary-color);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0 10px 10px 0;
        }

        .tip-box strong {
            color: var(--primary-color);
        }

        .warning-box {
            background: rgba(255, 193, 7, 0.1);
            border-left: 4px solid var(--accent-color);
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
            border-radius: 0 10px 10px 0;
        }

        .warning-box strong {
            color: var(--accent-color);
        }

        .back-link {
            display: inline-flex;
            align-items: center;
            color: var(--primary-color);
            text-decoration: none;
            margin-bottom: 2rem;
            transition: all 0.3s ease;
        }

        .back-link:hover {
            transform: translateX(-5px);
        }

        .back-link::before {
            content: '‚Üê';
            margin-right: 0.5rem;
        }

        .network-diagram {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }

        .network-diagram h3 {
            color: var(--accent-color);
            margin-bottom: 1rem;
        }

        .port-diagram {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
            margin: 1.5rem 0;
        }

        .port-box {
            background: var(--primary-color);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
        }

        .port-arrow {
            font-size: 1.5rem;
            color: var(--accent-color);
        }

        .firewall-rules {
            display: grid;
            gap: 1rem;
            margin-top: 1rem;
        }

        .firewall-rule {
            background: rgba(255,255,255,0.03);
            padding: 1rem;
            border-radius: 8px;
            border-left: 3px solid var(--primary-color);
        }

        .firewall-rule code {
            color: var(--accent-color);
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <ul class="nav-links">
            <li><a href="index.html">Home</a></li>
            <li><a href="docker.html">Docker</a></li>
            <li><a href="linux.html">Linux Commands</a></li>
            <li><a href="networking.html" class="active">Networking</a></li>
        </ul>
        <div class="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </div>
    </nav>

    <div class="content-section">
        <a href="index.html" class="back-link">Back to Home</a>
        
        <div class="content-header">
            <h1>üåê Networking Basics</h1>
            <p>Learn networking concepts for self-hosted applications</p>
        </div>

        <div class="tutorial-card">
            <h2>Understanding Ports & Forwarding</h2>
            <p>Ports are communication endpoints on your server. Each service uses a specific port number to accept connections.</p>
            
            <div class="network-diagram">
                <h3>Port Mapping Diagram</h3>
                <div class="port-diagram">
                    <div class="port-box">Internet</div>
                    <span class="port-arrow">‚Üí</span>
                    <div class="port-box">Router</div>
                    <span class="port-arrow">‚Üí</span>
                    <div class="port-box">:80 ‚Üí :8080</div>
                    <span class="port-arrow">‚Üí</span>
                    <div class="port-box">Container</div>
                </div>
            </div>
            
            <h3>Common Port Numbers</h3>
            <table class="command-table">
                <tr>
                    <td><code>80</code></td>
                    <td class="command-description">HTTP (Web)</td>
                </tr>
                <tr>
                    <td><code>443</code></td>
                    <td class="command-description">HTTPS (Secure Web)</td>
                </tr>
                <tr>
                    <td><code>22</code></td>
                    <td class="command-description">SSH</td>
                </tr>
                <tr>
                    <td><code>21</code></td>
                    <td class="command-description">FTP</td>
                </tr>
                <tr>
                    <td><code>25</code></td>
                    <td class="command-description">SMTP (Email)</td>
                </tr>
                <tr>
                    <td><code>3306</code></td>
                    <td class="command-description">MySQL</td>
                </tr>
                <tr>
                    <td><code>5432</code></td>
                    <td class="command-description">PostgreSQL</td>
                </tr>
                <tr>
                    <td><code>6379</code></td>
                    <td class="command-description">Redis</td>
                </tr>
            </table>
        </div>

        <div class="tutorial-card">
            <h2>Docker Networking</h2>
            
            <h3>Bridge Network (Default)</h3>
            <div class="code-block">
                <code><span class="comment"># Run container with port mapping</span>
<span class="command">docker</span> run <span class="flag">-d</span> <span class="flag">-p</span> 8080:80 nginx

<span class="comment"># Syntax: -p host_port:container_port</span>
<span class="comment"># Example: -p 3000:3000 maps host port 3000 to container port 3000</span></code>
            </div>
            
            <h3>Network Types</h3>
            <table class="command-table">
                <tr>
                    <td><code>bridge</code></td>
                    <td class="command-description">Default network, containers can communicate</td>
                </tr>
                <tr>
                    <td><code>host</code></td>
                    <td class="command-description">Removes network isolation</td>
                </tr>
                <tr>
                    <td><code>overlay</code></td>
                    <td class="command-description">Multi-host Docker networks</td>
                </tr>
                <tr>
                    <td><code>none</code></td>
                    <td class="command-description">Disables all networking</td>
                </tr>
            </table>
            
            <h3>Create Custom Network</h3>
            <div class="code-block">
                <code><span class="comment"># Create a custom bridge network</span>
<span class="command">docker</span> network create mynetwork

<span class="comment"># Run container on custom network</span>
<span class="command">docker</span> run <span class="flag">--network</span> mynetwork <span class="flag">-d</span> nginx

<span class="comment"># Connect existing container to network</span>
<span class="command">docker</span> network connect mynetwork container_name

<span class="comment"># List networks</span>
<span class="command">docker</span> network ls

<span class="comment"># Inspect network</span>
<span class="command">docker</span> network inspect mynetwork</code>
            </div>
        </div>

        <div class="tutorial-card">
            <h2>UFW Firewall (Ubuntu)</h2>
            <p>UFW (Uncomplicated Firewall) makes managing iptables rules easy.</p>
            
            <h3>Basic Commands</h3>
            <div class="code-block">
                <code><span class="comment"># Enable firewall</span>
<span class="command">sudo</span> ufw enable

<span class="comment"># Disable firewall</span>
<span class="command">sudo</span> ufw disable

<span class="comment"># Check status</span>
<span class="command">sudo</span> ufw status verbose

<span class="comment"># Allow SSH</span>
<span class="command">sudo</span> ufw allow ssh
<span class="command">sudo</span> ufw allow 22/tcp

<span class="comment"># Allow HTTP/HTTPS</span>
<span class="command">sudo</span> ufw allow http
<span class="command">sudo</span> ufw allow 80/tcp
<span class="command">sudo</span> ufw allow https
<span class="command">sudo</span> ufw allow 443/tcp

<span class="comment"># Allow specific port</span>
<span class="command">sudo</span> ufw allow 3000/tcp

<span class="comment"># Deny incoming by default</span>
<span class="command">sudo</span> ufw default deny incoming

<span class="comment"># Allow outgoing by default</span>
<span class="command">sudo</span> ufw default allow outgoing</code>
            </div>
            
            <h3>Port Ranges</h3>
            <div class="code-block">
                <code><span class="comment"># Allow range of ports</span>
<span class="command">sudo</span> ufw allow 8000:9000/tcp

<span class="comment"># Delete rule</span>
<span class="command">sudo</span> ufw delete allow 3000/tcp

<span class="comment"># List numbered rules</span>
<span class="command">sudo</span> ufw status numbered</code>
            </div>
            
            <div class="warning-box">
                <strong>‚ö†Ô∏è Warning:</strong> Always allow SSH (port 22) before enabling the firewall, or you may lock yourself out of your server!
            </div>
        </div>

        <div class="tutorial-card">
            <h2>Reverse Proxy with Nginx</h2>
            <p>A reverse proxy forwards client requests to backend servers and returns responses.</p>
            
            <h3>Basic Nginx Reverse Proxy Config</h3>
            <div class="code-block">
                <code><span class="keyword">server</span> {
    <span class="command">listen</span> 80;
    <span class="command">server_name</span> example.com;

    <span class="command">location</span> / {
        <span class="command">proxy_pass</span> http://localhost:3000;
        <span class="command">proxy_http_version</span> 1.1;
        <span class="command">proxy_set_header</span> Upgrade $http_upgrade;
        <span class="command">proxy_set_header</span> Connection 'upgrade';
        <span class="command">proxy_set_header</span> Host $host;
        <span class="command">proxy_set_header</span> X-Real-IP $remote_addr;
        <span class="command">proxy_set_header</span> X-Forwarded-For $proxy_add_x_forwarded_for;
        <span class="command">proxy_set_header</span> X-Forwarded-Proto $scheme;
        <span class="command">proxy_cache_bypass</span> $http_upgrade;
    }
}</code>
            </div>
            
            <h3>Docker + Nginx Reverse Proxy</h3>
            <div class="code-block">
                <code><span class="comment"># Run nginx as reverse proxy</span>
<span class="command">docker</span> run <span class="flag">-d</span> \
  <span class="flag">--name</span> nginx-proxy \
  <span class="flag">-p</span> 80:80 \
  <span class="flag">-p</span> 443:443 \
  <span class="flag">-v</span> /var/run/docker.sock:/tmp/docker.sock:ro \
  nginx</code>
            </div>
        </div>

        <div class="tutorial-card">
            <h2>Dynamic DNS (DDNS)</h2>
            <p>DDNS automatically updates DNS records when your IP address changes.</p>
            
            <h3>Using DDNS with a Script</h3>
            <div class="code-block">
                <code><span class="comment"># Install ddclient</span>
<span class="command">sudo</span> apt install ddclient

<span class="comment"># Configure ddclient</span>
<span class="command">sudo</span> nano /etc/ddclient.conf

<span class="comment"># Example configuration for No-IP</span>
<span class="command">protocol</span>=noip
<span class="command">use</span>=web
<span class="command">server</span=dynupdate.no-ip.com
<span class="command">login</span>=your-email@example.com
<span class="command">password</span>=your-password
<span class="command">your-hostname.ddns.net</span></code>
            </div>
            
            <h3>Cloudflare DDNS Script</h3>
            <div class="code-block">
                <code><span class="comment">#!/bin/bash</span>
<span class="comment"># Cloudflare DDNS update script</span>

<span class="command">ZONE_ID</span>=your_zone_id
<span class="command">RECORD_ID</span>=your_record_id
<span class="command">EMAIL</span>=your_email@example.com
<span class="command">API_KEY</span>=your_api_key
<span class="command">DOMAIN</span>=example.com

<span class="command">IP</span>=$(curl -s https://api.ipify.org)

<span class="command">curl</span> -X PUT <span class="string">"https://api.cloudflare.com/client/v4/zones/$ZONE_ID/dns_records/$RECORD_ID"</span> \
  <span class="flag">-H</span> <span class="string">"X-Auth-Email: $EMAIL"</span> \
  <span class="flag">-H</span> <span class="string">"X-Auth-Key: $API_KEY"</span> \
  <span class="flag">-H</span> <span class="string">"Content-Type: application/json"</span> \
  <span class="flag">--data</span> <span class="string">'{"type":"A","name":"'"$DOMAIN"'","content":"'"$IP"'"}'</span></code>
            </div>
        </div>

        <div class="tutorial-card">
            <h2>SSL/HTTPS with Let's Encrypt</h2>
            
            <h3>Install Certbot</h3>
            <div class="code-block">
                <code><span class="command">sudo</span> apt update
<span class="command">sudo</span> apt install certbot python3-certbot-nginx</code>
            </div>
            
            <h3>Get SSL Certificate</h3>
            <div class="code-block">
                <code><span class="comment"># For Nginx</span>
<span class="command">sudo</span> certbot --nginx -d example.com -d www.example.com

<span class="comment"># For Apache</span>
<span class="command">sudo</span> certbot --apache -d example.com -d www.example.com

<span class="comment"># Standalone (if no web server running)</span>
<span class="command">sudo</span> certbot certonly --standalone -d example.com</code>
            </div>
            
            <h3>Auto-Renewal</h3>
            <div class="code-block">
                <code><span class="comment"># Test automatic renewal</span>
<span class="command">sudo</span> certbot renew --dry-run

<span class="comment"># Check renewal status</span>
<span class="command">sudo</span> certbot renew</code>
            </div>
            
            <div class="tip-box">
                <strong>üí° Note:</strong> Let's Encrypt certificates expire after 90 days. Certbot sets up automatic renewal by default.
            </div>
        </div>

        <div class="tutorial-card">
            <h2>Docker Compose with Networking</h2>
            
            <div class="code-block">
                <code><span class="keyword">version</span>: <span class="string">'3.8'</span>

<span class="keyword">services</span>:
  <span class="command">nginx</span>:
    <span class="command">image</span>: <span class="string">nginx:latest"</span>
    <span class="command">ports</span>:
      - <span class="string">"80:80"</span>
      - <span class="string">"443:443"</span>
    <span class="command">networks</span>:
      - <span class="string">frontend</span>
    <span class="command">volumes</span>:
      - <span class="string">./nginx.conf:/etc/nginx/nginx.conf:ro</span>

  <span class="command">app</span>:
    <span class="command">build</span>: .
    <span class="command">networks</span>:
      - <span class="string">frontend</span>
      - <span class="string">backend</span>

  <span class="command">database</span>:
    <span class="command">image</span>: <span class="string">postgres:14"</span>
    <span class="command">networks</span>:
      - <span class="string">backend</span>
    <span class="command">volumes</span>:
      - <span class="string">db-data:/var/lib/postgresql/data</span>

<span class="keyword">networks</span>:
  <span class="command">frontend</span>:
  <span class="command">backend</span>:

<span class="keyword">volumes</span>:
  <span class="command">db-data</span>:</code>
            </div>
        </div>

        <div class="tutorial-card">
            <h2>Network Troubleshooting</h2>
            
            <table class="command-table">
                <tr>
                    <td><code>ping [host]</code></td>
                    <td class="command-description">Test connectivity</td>
                </tr>
                <tr>
                    <td><code>traceroute [host]</code></td>
                    <td class="command-description">Trace route to host</td>
                </tr>
                <tr>
                    <td><code>netstat -tulpn</code></td>
                    <td class="command-description">Show listening ports</td>
                </tr>
                <tr>
                    <td><code>ss -tulpn</code></td>
                    <td class="command-description">Socket statistics</td>
                </tr>
                <tr>
                    <td><code>curl -v [url]</code></td>
                    <td class="command-description">Test HTTP request</td>
                </tr>
                <tr>
                    <td><code>nslookup [domain]</code></td>
                    <td class="command-description">DNS lookup</td>
                </tr>
                <tr>
                    <td><code>dig [domain]</code></td>
                    <td class="command-description">Detailed DNS info</td>
                </tr>
                <tr>
                    <td><code>ip addr show</code></td>
                    <td class="command-description">Show network interfaces</td>
                </tr>
                <tr>
                    <td><code>iptables -L</code></td>
                    <td class="command-description">List firewall rules</td>
                </tr>
            </table>
            
            <h3>Docker Network Troubleshooting</h3>
            <div class="code-block">
                <code><span class="comment"># Inspect container network</span>
<span class="command">docker</span> inspect container_name

<span class="comment"># View container logs</span>
<span class="command">docker</span> logs container_name

<span class="comment"># Execute command in container</span>
<span class="command">docker</span> exec -it container_name sh

<span class="comment"># Test network from container</span>
<span class="command">docker</span> exec container_name ping other_container

<span class="comment"># Check DNS resolution</span>
<span class="command">docker</span> exec container_name nslookup google.com</code>
            </div>
        </div>

        <div class="tutorial-card">
            <h2>Security Best Practices</h2>
            
            <div class="tip-box">
                <strong>‚úÖ Always:</strong>
                <ul>
                    <li>Use HTTPS/SSL for all web services</li>
                    <li>Keep software updated</li>
                    <li>Use strong passwords and SSH keys</li>
                    <li>Configure firewall rules properly</li>
                    <li>Limit exposed ports</li>
                    <li>Use reverse proxies</li>
                </ul>
            </div>
            
            <div class="warning-box">
                <strong>‚ùå Never:</strong>
                <ul>
                    <li>Expose databases directly to the internet</li>
                    <li>Use default ports for services</li>
                    <li>Run containers as root when possible</li>
                    <li>Disable firewall for "convenience"</li>
                </ul>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; Built By Callum from the UK.</p>
    </footer>

    <script src="script.js"></script>
</body>
</html>
